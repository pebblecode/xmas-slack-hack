{"version":3,"sources":["../../../src/plugins/api/word.js"],"names":[],"mappings":";;;;;qBAUwB,IAAI;;;;;;oBAVX,MAAM;;;;qBACL,OAAO;;;;8BACR,iBAAiB;;;;0BACT,sBAAsB;;IAAlC,MAAM;;yBACD,YAAY;;;;AAE9B,IAAM,MAAM,GAAG,wBAAM,MAAM,CAAC,CAAC;;AAE7B,IAAM,KAAK,GAAG,4BAAW,CAAA;;AAEV,SAAS,IAAI,CAAC,MAAM,EAAE;;AAEnC,MAAI,cAAc,YAAA,CAAA;;AAElB,WAAS,SAAS,CAAC,OAAO,EAAE,KAAK,EAAE;AACjC,QAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAA;AACjC,QAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAA;AACvC,WAAO,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;;AAElC,QAAM,YAAY,GAAG,CAAC;AACpB,WAAK,EAAE,UAAU;AACjB,UAAI,EAAE,WAAW;KAClB,CAAC,CAAA;;AAEF,QAAM,WAAW,GAAG,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;;AAE9C,aAAS,QAAQ,CAAC,WAAW,EAAE;AAC7B,UAAI,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;AAC/B,eAAO,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,IAAI,CAAC,CAAA;AACtC,cAAM,EAAE,CAAA;OACT;KACF;;AAED,aAAS,MAAM,GAAG;AAChB,UAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,UAAC,IAAI,EAAK;AACrD,eAAO;AACL,cAAI,EAAE,uBAAuB;AAC7B,kBAAQ,EAAE,QAAQ;SACnB,CAAA;OACF,CAAC,CAAC;;AAEH,WAAK,CAAC,QAAQ,CAAC,CAAC;KACjB;;AAED,SAAK,EAAE,CAAA;GACR;;AAED,SAAO;AACL,aAAS,EAAT,SAAS;GACV,CAAC;CAEH","file":"word.js","sourcesContent":["import Boom from 'boom';\nimport debug from 'debug';\nimport reqp from 'request-promise';\nimport *  as secret from '../../../secret.json';\nimport Slack from 'node-slack';\n\nconst logger = debug('word');\n\nconst slack = new Slack()\n\nexport default function root(server) {\n\n  let announced_user\n\n  function slackpost(request, reply) {\n    const text = request.payload.text\n    const user_id = request.payload.user_id\n    console.log('new slackpost', text)\n\n    const search_terms = [{\n      regex: /\\wnom\\w/i,\n      name: 'christmas'\n    }]\n\n    const found_words = search_terms.map(testWord)\n\n    function testWord(search_term) {\n      if (search_term.regex.test(text)){\n        console.log('found', search_term.name)\n        noNoms()\n      }\n    }\n\n    function noNoms() {\n      const response = slack.respond(request.body, (hook) => {\n        return {\n          text: 'Noms are not allowed.',\n          username: 'NomBot'\n        }\n      });\n\n      reply(response);\n    }\n\n    reply()\n  }\n\n  return {\n    slackpost,\n  };\n\n}\n"]}