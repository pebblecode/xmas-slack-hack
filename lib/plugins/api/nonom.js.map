{"version":3,"sources":["../../../src/plugins/api/nonom.js"],"names":[],"mappings":";;;;;qBASwB,IAAI;;;;;;0BATH,sBAAsB;;IAAlC,MAAM;;yBACE,WAAW;;;;AAEhC,IAAM,GAAG,GAAG,2BAAa;AACvB,OAAK,EAAE,MAAM,CAAC,KAAK;AACnB,MAAI,EAAE,QAAQ;CACf,CAAC,CAAA;;AAGa,SAAS,IAAI,CAAC,MAAM,EAAE;;AAEnC,KAAG,CAAC,EAAE,CAAC,SAAS,EAAE,UAAC,IAAI,EAAK;AAC1B,QAAM,MAAM,GAAG;AACb,gBAAU,EAAE,aAAa;KAC1B,CAAA;;AAED,SAAK,CAAC,IAAI,CAAC,CAAA;AACX,OAAG,CAAC,oBAAoB,CAAC,aAAa,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;GAC1D,CAAC,CAAA;;AAEF,WAAS,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE;AAC7B,QAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAA;AACjC,QAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAA;AACvC,WAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;;AAE9B,QAAM,YAAY,GAAG,CAAC;AACpB,WAAK,EAAE,UAAU;AACjB,UAAI,EAAE,WAAW;KAClB,CAAC,CAAA;;AAEF,QAAM,WAAW,GAAG,YAAY,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;;AAE9C,aAAS,QAAQ,CAAC,WAAW,EAAE;AAC7B,UAAI,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;AAC/B,eAAO,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,IAAI,CAAC,CAAA;AACtC,cAAM,EAAE,CAAA;OACT;KACF;;AAED,aAAS,MAAM,GAAG;AAChB,UAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,UAAC,IAAI,EAAK;AACrD,eAAO;AACL,cAAI,EAAE,uBAAuB;AAC7B,kBAAQ,EAAE,QAAQ;SACnB,CAAA;OACF,CAAC,CAAC;;AAEH,SAAG,CAAC,oBAAoB,CAAC,aAAa,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;KAC1D;;AAED,SAAK,EAAE,CAAA;GACR;;AAED,SAAO;AACL,SAAK,EAAL,KAAK;GACN,CAAC;CAEH","file":"nonom.js","sourcesContent":["import *  as secret from '../../../secret.json';\nimport SlackBot from 'slackbots';\n\nconst bot = new SlackBot({\n  token: secret.token,\n  name: 'NomBot'\n})\n\n\nexport default function root(server) {\n\n  bot.on('message', (data) => {\n    const params = {\n      icon_emoji: ':hamburger:'\n    }\n\n    nonom(data)\n    bot.postMessageToChannel('hacktesting', 'test!', params);\n  })\n\n  function nonom(request, reply) {\n    const text = request.payload.text\n    const user_id = request.payload.user_id\n    console.log('new nonom', text)\n\n    const search_terms = [{\n      regex: /\\wnom\\w/i,\n      name: 'christmas'\n    }]\n\n    const found_words = search_terms.map(testWord)\n\n    function testWord(search_term) {\n      if (search_term.regex.test(text)){\n        console.log('found', search_term.name)\n        noNoms()\n      }\n    }\n\n    function noNoms() {\n      const response = slack.respond(request.body, (hook) => {\n        return {\n          text: 'Noms are not allowed.',\n          username: 'NomBot'\n        }\n      });\n\n      bot.postMessageToChannel('hacktesting', 'test!', params);\n    }\n\n    reply()\n  }\n\n  return {\n    nonom,\n  };\n\n}\n"]}